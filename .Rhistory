)) %>% mutate(attPerc = att / classTotal) %>% mutate(missed = classTotal - att)
typeof(0)
typeof(1)
typeof(as.integer(0))
big <- section %>% filter(delivery == "inclass") %>% select(sectionId, instructor) %>%
right_join(roster, by = c('sectionId' = 'section')) %>% collect() %>%
left_join(attend, by = 'pawsId') %>% right_join(course, by = c('sectionId')) %>%
mutate(att = case_when(
eventTopic.x != eventTopic.y ~ as.integer(0),
TRUE ~ att
)) %>% mutate(attPerc = att / classTotal) %>% mutate(missed = classTotal - att)
?right_join
big <- section %>% filter(delivery == "inclass") %>% select(sectionId, instructor) %>%
right_join(roster, by = c('sectionId' = 'section')) %>% collect() %>%
left_join(attend, by = 'pawsId') %>% full_join(course, by = c('sectionId', 'eventTopic')) %>%
mutate(attPerc = att / classTotal) %>% mutate(missed = classTotal - att)
big <- section %>% filter(delivery == "inclass") %>% select(sectionId, instructor) %>%
left_join(roster, by = c('sectionId' = 'section')) %>% collect() %>%
left_join(attend, by = 'pawsId') %>% full_join(course, by = c('sectionId', 'eventTopic')) %>%
mutate(attPerc = att / classTotal) %>% mutate(missed = classTotal - att)
big <- section %>% filter(delivery == "inclass") %>% select(sectionId, instructor) %>%
left_join(roster, by = c('sectionId' = 'section')) %>% collect() %>%
left_join(attend, by = 'pawsId') %>% left_join(course, by = c('sectionId', 'eventTopic')) %>%
mutate(attPerc = att / classTotal) %>% mutate(missed = classTotal - att)
big %>% filter(pawsId == 'bbares2') %>% filter(eventTopic == 'lecture') %>% select(missed)
as.character(big %>% filter(pawsId == 'bbares2') %>% filter(eventTopic == 'lecture') %>% select(missed))
?renderValueBox
?valueBox
library(tidyverse)
source('connection.R')
source('constants.R')
# import data
roster <- tbl(conDatasource, 'student_user')
activity <- tbl(conDatasource, 'activity')
attendance <- tbl(conDatasource, 'attendance')
classes <- tbl(conDatasource, 'attevent')
section <- tbl(conDatasource, 'section')
nameTable <- left_join(roster, section, by = c('section' = 'sectionId')) %>%
filter(delivery == "inclass") %>% distinct(pawsId, lastname, firstname) %>% arrange(lastname) %>%
collect()
nameList <- c()
for (row in 1:nrow(nameTable)) {
index <- paste0(nameTable[row, 'lastname'], ', ', nameTable[row, 'firstname'])
nameList[index] <- as.character(nameTable[row, "pawsId"])
}
course <- classes %>% collect() %>% mutate(sectionId = substr(eventId, 1, 7)) %>%
group_by(sectionId, eventTopic) %>% summarise(classTotal = n())
attend <- attendance %>% left_join(classes, by = c('att_event' = 'eventId')) %>% collect() %>%
group_by(pawsId, eventTopic) %>% summarise(att = n())
big <- section %>% filter(delivery == "inclass") %>% select(sectionId, instructor) %>%
left_join(roster, by = c('sectionId' = 'section')) %>% collect() %>%
left_join(attend, by = 'pawsId') %>% left_join(course, by = c('sectionId', 'eventTopic')) %>%
mutate(attPerc = att / classTotal) %>% mutate(missed = classTotal - att)
View(big)
chunk <- tbl(conDatasource, 'exchunk')
submission <- tbl(conDatasource, 'exsubmission')
subs <- left_join(submission, chunk, by = c('label' = 'chunkId'))
head(subs)
subs <- submission %>% filter(pawsId != "") %>% left_join(chunk, by = c('label' = 'chunkId'))
head(subs)
subs <- submission %>% filter(pawsId != "") %>% left_join(chunk, by = c('label' = 'chunkId')) %>%
group_by(pawsId, label, mainTopic, subTopic) %>% summarise(submissions = n(), bestScore = max(totalscore))
head(subs)
subs <- submission %>% filter(pawsId != "") %>% left_join(chunk, by = c('label' = 'chunkId')) %>%
collect() %>% group_by(pawsId, label, mainTopic, subTopic) %>%
summarise(submissions = n(), bestScore = max(totalscore))
view(subs)
View(subs)
assignments <- chunk %>% collect()
head(chunk)
View(subs)
test <- subs %>% filter(pawsId == "aferro5") %>% select(pawsId, label)
test
str(subs)
subs <- submission %>% filter(pawsId != "") %>% left_join(chunk, by = c('label' = 'chunkId')) %>%
group_by(pawsId, label, mainTopic, subTopic) %>%
summarise(submissions = n(), bestScore = max(totalscore)) %>% as.data.frame()
subs <- submission %>% filter(pawsId != "") %>% left_join(chunk, by = c('label' = 'chunkId')) %>%
group_by(pawsId, label, mainTopic, subTopic) %>%
summarise(submissions = n(), bestScore = max(totalscore)) %>% collect() %>% as.data.frame()
submission %>% filter(is.na(totalscore))
subs <- submission %>% filter(pawsId != "") %>% left_join(chunk, by = c('label' = 'chunkId')) %>%
group_by(pawsId, label, mainTopic, subTopic) %>%
summarise(submissions = n(), bestScore = max(totalscore, na.rm = TRUE)) %>% collect() %>%
as.data.frame()
str(subs)
test <- subs %>% filter(pawsId == "aferro5") %>% select(pawsId, label)
test
filter(assignments, !(chunkId %in% test$label))
test <- subs %>% filter(pawsId == "adav236") %>% select(pawsId, label)
filter(assignments, !(chunkId %in% test$label))
test
test <- subs %>% filter(pawsId == "aand144") %>% select(pawsId, label)
filter(assignments, !(chunkId %in% test$label))
filter(assignments, !(chunkId %in% test$label))
head(submissions)
head(submission)
submission %>% arrange(desc(subTime)) %>% head()
View(big)
head(attend)
head(course)
course
cwd()
getwd()
head(roster)
library(tidyverse)
source('connection.R')
source('constants.R')
# import data
roster <- tbl(conDatasource, 'student_user')
attendance <- tbl(conDatasource, 'attendance')
class <- tbl(conDatasource, 'attevent')
chunk <- tbl(conDatasource, 'exchunk')
head(roster)
head(chunk)
submission <- tbl(conDatasource, 'exsubmission')
head(submission)
subs <- submission %>% filter(pawsId != "")
head(subs)
subs <- submission %>% filter(pawsId != "") %>% left_join(chunk, by = c('label' = 'chunkId')) %>%
select(pawsId, label, mainTopic, subTopic)
head(subs)
head(attendance)
head(class)
att <- left_join(attendance, class, by = c('att_event' = 'eventId')) %>% select(pawsId, eventDate)
head(att)
subs <- submission %>% filter(pawsId != "") %>% left_join(chunk, by = c('label' = 'chunkId')) %>%
select(pawsId, label, mainTopic, subTopic) %>% collect()
att <- left_join(attendance, class, by = c('att_event' = 'eventId')) %>% select(pawsId, eventDate) %>%
collect()
roster()
head(roster)
students <- roster %>% select(pawsId, section) %>% collect()
head(students)
## TOPICS!
isTopics <- c("Home", "Introduction", "Cybersecurity", "Hardware", "Software", "Networking",
"IS Foundations", "Value Creation", "Business Models")
isTopics[1]
isTopics[1:4]
excelTopics <- c("Home", "Formatting", "Functions", "Worksheet Mgt", "Sort & Filter",
"Pivot Tables", "Comprehensive Analysis")
wordTopics <- c("Home", "Simple Document", "Template", "Complex Document")
len(excelTopics)
length(excelTopics)
wordTopics[-1]
exam1Topics <- excelTopics[2:4]
exam2Topics <- excelTopics[5:7]
exam3Topics <- wordTopics[-1]
# exam dates (2 week intervals with the end date being the last day of testing)
# e = excel & w = word
e1 <- interval('2018-09-14', '2018-09-28')
?interval
int_start(e1)
as.Date(int_start(e1))
int <- '2018-08-24' %--% '2018-09-07'
int
int_start(int)
typeof(int_start(int))
int <- as.Date('2018-08-24') %--% as.Date('2018-09-07')
int
typeof(int)
typeof(int_start(int))
head(att)
head(subs)
att <- left_join(attendance, class, by = c('att_event' = 'eventId')) %>% select(pawsId, eventDate) %>%
collect() %>% mutate(eventDate = as.Date(eventDate))
head(att)
# Choose an exam!
# 1 = exam 1, 2 = exam2, 3 = exam3
exam <- 1
if (exam == 1) {
print('1')
} else if (exam == 2) {
print('2')
} else {
print('3')
}
distinct(subs$subTopic)
distinct(subs, subTopic)
head(subs)
exam1chunks <- c('e1a', 'e1b', 'e1c', 'e1d', 'e2a', 'e2b', 'e2c', 'e2d', 'e2e', 'e3a', 'e3b', 'e3c',
'e3d')
exam2chunks <- c('e4a', 'e4b', 'e4c', 'e4d', 'e4e', 'e5a', 'e5b', 'e5c', 'e5d', 'e5e', 'e6a', 'e6b',
'e6c', 'e6d', 'e6e')
exam3chunks <- c('w1a', 'w1b', 'w1c', 'w1d', 'w2a', 'w2b', 'w2c', 'w2d', 'w3a', 'w3b', 'w3c')
typeof(currentSemester)
x <- as.Date(currentSemester)
typeof(x)
?as.Date
?as_date
x <- as_date(currentSemester)
typeof(c)
typeof(x)
int_end(e1)
typeof(int_end(e1))
exam
if (exam == 1) {
startDate <- currentSemester
endDate <- es1
chunks <- exam1chunks
} else if (exam == 2) {
startDate <- int_end(e1)
endDate <- es2
chunks <- exam2chunks
} else {
startDate <- int_end(e2)
endDate <- ws1
chunks <- exam3chunks
}
startDate
endDate
chunks
head(subs)
chunks
goodSubs <- subs %>% filter(label %in% chunks)
head(att)
typeof(as.Date(startDate))
str(att)
goodatt <- att %>% filter(eventDate >= as.Date(startDate), eventDate < as.Date(endDate))
View(goodatt)
goodAtt <- att %>% filter(eventDate >= as.Date(startDate), eventDate < as.Date(endDate))
startDate
str(goodAtt)
endDate
head(goodSubs)
typeof(goodSubs$pawsId)
# find delinquents
badStudents <- students %>% filter(!(pawsId %in% goodSubs$pawsId))
View(badStudents)
View(goodSubs)
distinct(goodSubs, label)
nrow(students)
head(goodAtt)
delinquents <- badStudents %>% filter(!(pawsId %in% goodAtt$pawsId))
View(delinquents)
length(students)
nrow(students)
nrow(badStudents)
nrow(delinquents)
nrow(students %>% filter(pawsId %in% goodSubs$pawsId))
?write.csv
??write.csv
name
# Choose an exam!
# 1 = exam 1, 2 = exam 2, 3 = exam 3
exam <- 1
if (exam == 1) {
startDate <- currentSemester
endDate <- es1
chunks <- exam1chunks
name <- 'exam1delinquents.csv'
} else if (exam == 2) {
startDate <- int_end(e1)
endDate <- es2
chunks <- exam2chunks
name <- 'exam2delinquents.csv'
} else {
startDate <- int_end(e2)
endDate <- ws1
chunks <- exam3chunks
name <- 'exam3delinquents.csv'
}
# write results to a csv file
write.csv(delinquents, file = name)
source('~/DDSLab/InstructorDashboard/delinquents.R', echo=TRUE)
source('~/DDSLab/InstructorDashboard/delinquents.R', echo=TRUE)
source('~/DDSLab/InstructorDashboard/delinquents.R', echo=TRUE)
x <- subs %>% filter(label %in% c('e1a', 'e1b', 'e1c', 'e1d'))
x
distinct(x, label)
y <- students %>% filter(!(pawsId %in% x$pawsId))
y
head(class)
head(roster)
distinct(roster, section)
section <- tbl(conDatasource, 'section')
head(section)
section
inClass <- c('2018FA3', '2018FA4', '2018FA5', '2018FA6')
filter(section, sectionId %in% inClass)
head(roster)
source('~/DDSLab/InstructorDashboard/delinquents.R', echo=TRUE)
nrow(delinquents)
nrow(badStudents)
source('~/DDSLab/InstructorDashboard/delinquents.R', echo=TRUE)
nrow(delinquents)
nrow(students)
nrow(badStudents)
source('~/DDSLab/InstructorDashboard/delinquents.R', echo=TRUE)
nrow(students)
nrow(badStudents)
nrow(delinquents)
head(assignments)
library(flexdashboard)
library(flexdashboard)
library(plotly)
library(shiny)
library(plotly)
library(shiny)
source('studentBackEnd.R')
# inputs
radioButtons("student", "Select a Student", nameList)
# Submissions Table
studentSubs <- reactive(filter(subs, pawsId == input$student) %>% select(label, submissions, bestScore))
head(assignments)
head(subs)
?geom_bar
head(assignments)
?labs
library(RColorBrewer)
?RColorBrewer
brewer.pal(3, "Pastel2")
display.brewer.all()
display.brewer.pal(3, "Pastel2")
?WesAnderson
?wesanderson
?wesanderson::wes_palettes
?wesanderson
?display.brewer.pal
display.brewer.all()
display.brewer.all(colorblindFriendly = True)
display.brewer.all(colorblindFriendly = TRUE)
display.brewer.all()
display.brewer.pal(3, "Set2")
display.brewer.pal(3, "Set3")
display.brewer.pal(3, "Set1")
display.brewer.pal(3, "Set2")
display.brewer.pal(3, "Spectral")
display.brewer.pal(3, "PiYG")
display.brewer.pal(3, "RdYlGn")
display.brewer.pal(10, "RdYlGn")
display.brewer.pal(3, "Set2")
display.brewer.pal(3, "Accent2")
display.brewer.pal(3, "Accent")
?renderPlot
?scale_color_discrete
names(assignments)
names(assignments)[order(assignments)]
a <- table(assignments$subTopic)
names(a)[order(a)]
distinct(assignments, subTopic)
remove(a)
levels <- distinct(assignments, subTopic)
levels
levels <- as.vector(distinct(assignments, subTopic))
levels
assignments$subTopic
levels
levels$subTopic
levels <- as.vector(levels$subTopic)
levels
levels <- distinct(assignments, subTopic)
levels
levels <- as.vector(levels$subTopic)
levels
assignments$st2 <- levels
assignments$st2 <- factor(assignments$subTopic, levels = levels)
head(assignments)
library(flexdashboard)
library(flexdashboard)
library(plotly)
library(shiny)
library(plotly)
library(shiny)
library(RColorBrewer)
library(plotly)
library(shiny)
library(RColorBrewer)
source('studentBackEnd.R')
display.brewer.pal(3, "Pastel1")
display.brewer.pal(3, "Pastel2")
display.brewer.pal(3, "RdYlGn")
display.brewer.pal(5, "RdYlGn")
display.brewer.pal(11, "RdYlGn")
?scale_fill_continuous
head(activity)
activity <- tbl(conDatasource, 'activity')
head(activity)
head(filter(activity, userId != ""))
distinct(activity, hitType)
# Theory
activity %>% select(userId, pagePath, eventCategory, eventLabel, eventValue)
# Theory
activity %>% filter(userId != "") %>% select(userId, pagePath, eventCategory, eventLabel, eventValue)
distinct(activity, eventCategory)
filter(activity, eventCategory == "Page Visibility")
filter(activity, eventCategory == "Page Visibility") %>% select(eventLabel, eventValue)
# Theory
activity %>% filter(userId != "") %>% select(userId, pagePath, eventCategory, eventValue)
head(activity)
# Theory
activity %>% filter(userId != "") %>% select(userId, pagePath, hitType, eventCategory, eventValue)
# Theory
activity %>% filter(userId != "") %>% select(userId, pagePath, hitType, eventCategory, eventValue) %>%
filter(hitType == "pageview" | eventCategory == "Page Visibility")
head(roster)
# Theory
activity %>% filter(userId != "") %>% select(userId, pagePath, hitType, eventCategory, eventValue) %>%
filter(hitType == "pageview" | eventCategory == "Page Visibility") %>% right_join(roster, by = "userId")
# Theory
activity %>% filter(userId != "") %>% select(userId, pagePath, hitType, eventCategory, eventValue) %>%
filter(hitType == "pageview" | eventCategory == "Page Visibility") %>%
right_join(roster, by = "userId") %>% select(-lastname:section)
# Theory
activity %>% filter(userId != "") %>% filter(hitType == "pageview" | eventCategory == "Page Visibility") %>%
right_join(roster, by = "userId") %>% select(pawsId, pagePath, hitType, eventCategory, eventValue)
pages <- tbl(conDatasource, 'page')
head(page)
head(pages)
# Theory
activity %>% filter(userId != "") %>% filter(hitType == "pageview" | eventCategory == "Page Visibility") %>%
right_join(roster, by = "userId") %>% select(pawsId, pagePath, hitType, eventCategory, eventValue) %>%
left_join(pages, by = "pagePath")
# Theory
activity %>% filter(userId != "") %>% filter(hitType == "pageview" | eventCategory == "Page Visibility") %>%
right_join(roster, by = "userId") %>% select(pawsId, pagePath, hitType, eventCategory, eventValue) %>%
left_join(pages, by = "pagePath") %>% filter(pageCategory == "is")
# Theory
activity %>% filter(userId != "") %>% filter(hitType == "pageview" | eventCategory == "Page Visibility") %>%
right_join(roster, by = "userId") %>% select(pawsId, pagePath, hitType, eventCategory, eventValue) %>%
left_join(pages, by = "pagePath") %>% filter(pageCategory == "is" & pagePath != '/is/')
# Theory
theory <- activity %>% filter(userId != "") %>% filter(hitType == "pageview" | eventCategory == "Page Visibility") %>%
right_join(roster, by = "userId") %>% select(pawsId, pagePath, hitType, eventCategory, eventValue) %>%
left_join(pages, by = "pagePath") %>% filter(pageCategory == "is" & pagePath != '/is/') %>% collect()
head(theory)
str(theory)
?substr
x
z
z <- '/is/intro-to-is'
z
len(z)
length(z)
substr(z, 5, 9)
substr(z, 5, 20)
nchar(z)
substr(z, 5, 15)
# Theory
theory <- activity %>% filter(userId != "") %>% filter(hitType == "pageview" | eventCategory == "Page Visibility") %>%
right_join(roster, by = "userId") %>% select(pawsId, pagePath, hitType, eventCategory, eventValue) %>%
left_join(pages, by = "pagePath") %>% filter(pageCategory == "is" & pagePath != '/is/') %>% collect() %>%
mutate(topic = substr(pagePath, 5, nchar(pagePath)))
head(theory)
?gsub
theory %>% mutate(topic = gsub("-", " ", topic))
?lower
?tolower
.simpleCap <- function(x) {
s <- strsplit(x, " ")[[1]]
paste(toupper(substring(s, 1, 1)), substring(s, 2),
sep = "", collapse = " ")
}
mutate(theory, topic = .simpleCap(topic))
# Caps function
simpleCap <- function(x) {
# Caps function
simpleCap <- function(x) {
s <- strsplit(x, " ")[[1]]
paste(toupper(substring(s, 1, 1)), substring(s, 2),
sep = "", collapse = " ")
}
theory <- theory %>% mutate(topic = substr(pagePath, 5, nchar(pagePath))) %>%
mutate(topic = gsub("-", " ", topic)) %>% mutate(topic = simpleCap(topic))
head(theory)
theory <- theory %>% mutate(topic = substr(pagePath, 5, nchar(pagePath))) %>%
mutate(topic = gsub("-", " ", topic)) %>% mutate(topic = simpleCap(topic))
# Caps function
simpleCap <- function(x) {
s <- strsplit(x, " ")[[1]]
paste(toupper(substring(s, 1, 1)), substring(s, 2),
sep = "", collapse = " ")
}
theory <- theory %>% mutate(topic = substr(pagePath, 5, nchar(pagePath))) %>%
mutate(topic = gsub("-", " ", topic)) %>% mutate(topic = simpleCap(topic))
head(theory)
View(theory)
distinct(theory, topic)
# Theory
theory <- activity %>% filter(userId != "") %>% filter(hitType == "pageview" | eventCategory == "Page Visibility") %>%
right_join(roster, by = "userId") %>% select(pawsId, pagePath, hitType, eventCategory, eventValue) %>%
left_join(pages, by = "pagePath") %>% filter(pageCategory == "is" & pagePath != '/is/') %>% collect()
theory <- theory %>% mutate(topic = substr(pagePath, 5, nchar(pagePath))) %>%
mutate(topic = gsub("-", " ", topic)) %>% mutate(topic = simpleCap(topic))
theory <- theory %>% mutate(topic = substr(pagePath, 5, nchar(pagePath))) %>%
mutate(topic = gsub("-", " ", topic)) #%>% mutate(topic = simpleCap(topic))
pageviews <- theory %>% filter(hitType == "pageview") %>% count()
pageviews
pageviews <- theory %>% filter(hitType == "pageview") %>% group_by(pawsId, topic)
pageviews
pageviews <- theory %>% filter(hitType == "pageview") %>% group_by(pawsId, topic) %>%
summarize(pgViews = n())
pageviews
timeviews <- theory %>% filter(eventCategory == "Page Visibility") %>% group_by(pawsId, topic) %>%
summarise(seconds = sum(eventValue))
timeViews
timeviews <- theory %>% filter(eventCategory == "Page Visibility") %>% group_by(pawsId, topic) %>%
summarise(seconds = sum(eventValue))
timeviews
theory2 <- left_join(pageviews, timeviews, by = c("pawsId", "topic"))
theory2
head(theory)
View(theory2)
theory2 <- left_join(pageviews, timeviews, by = c("pawsId", "topic")) %>%
mutate(minutes = seconds/60, hours = minutes/60)
?mutate_if
?summarise_all
?sum
?theme
?element_text
?renderplot
?renderPlot
